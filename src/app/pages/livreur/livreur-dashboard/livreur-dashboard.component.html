<app-header-livreur></app-header-livreur>
<div class="order-list">
  <h1>Liste des Commandes</h1>
  <div class="order-grid">
    <div class="order-card" *ngFor="let order of orders">
      <div class="order-image">
        <img [src]="order.image" alt="Image commande" />
        <div class="order-actions">
          <button class="accept-button" (click)="acceptOrder(order)" [disabled]="order.status === 'livré'">
            {{ order.status === 'livré' ? 'Livré' : 'Accepter' }}
          </button>
        </div>
      </div>
      <div class="order-details">
        <h2>Commande #{{ order.id }}</h2>
        <p><strong>Client:</strong> {{ order.customerName }}</p>
        <p><strong>Adresse:</strong> {{ order.address }}</p>
        <p><strong>Contact:</strong> {{ order.contact }}</p>
        <p><strong>Statut:</strong> {{ order.status }}</p>
        <p><strong>Articles:</strong></p>
        <ul>
          <li *ngFor="let item of order.items">
            {{ item.name }} - {{ item.quantity }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Modal pour afficher la carte -->
<div *ngIf="selectedOrder" class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <google-map [center]="selectedOrder.center" [zoom]="13" height="400px" width="100%">
      <advanced-marker [position]="selectedOrder.center" [title]="selectedOrder.customerName">
        <pin-element></pin-element>
      </advanced-marker>
    </google-map>
    <button (click)="closeModal()">Fermer</button>
  </div>
</div>

<app-footer></app-footer>
