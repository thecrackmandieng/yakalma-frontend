<app-header></app-header>
<app-sidebar></app-sidebar>

<div class="dashboard-container">
  <!-- Cartes statistiques -->
  <div class="cards">
    <div class="card" *ngFor="let card of cards">
      <fa-icon [icon]="card.icon" class="large-icon"></fa-icon>
      <h3>{{ card.title }}</h3>
      <p>{{ card.value }}</p>
    </div>
  </div>

  <!-- Graphiques -->
  <div class="charts">
    <div class="chart" *ngIf="isBrowser()" ngSkipHydration>
      <h3>Historique des Commandes</h3>
      <canvas baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="lineChartType">
      </canvas>
    </div>

    <div class="chart" *ngIf="isBrowser()" ngSkipHydration>
      <h3>Encaissements Restaurants vs Livreurs</h3>
      <canvas baseChart
        [data]="barChartData"
        [options]="barChartOptions"
        [type]="barChartType">
      </canvas>
    </div>

    <div class="chart" *ngIf="isBrowser()" ngSkipHydration>
      <h3>Répartition Utilisateurs</h3>
      <canvas baseChart
        [data]="doughnutChartData"
        [options]="doughnutChartOptions"
        [type]="doughnutChartType">
      </canvas>
    </div>
  </div>

  <!-- Liste des administrateurs avec pagination -->
  <div class="admin-list">
    <h3>Liste des Administrateurs</h3>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Nom</th>
            <th>Email</th>
            <th>Rôle</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let admin of paginatedAdmins(); let i = index">
            <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
            <td>{{ admin.name }}</td>
            <td>{{ admin.email }}</td>
            <td>{{ admin.role }}</td>
            <td>
              <span [class.active]="admin.isActive" [class.inactive]="!admin.isActive">
                {{ admin.isActive ? 'Actif' : 'Inactif' }}
              </span>
            </td>
            <td class="actions">
              <button (click)="editAdmin(admin)">✏️</button>
              <button (click)="deleteAdmin(admin)">🗑️</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="totalPages() > 1">
      <button (click)="prevPage()" [disabled]="currentPage === 1">Précédent</button>
      <span>Page {{ currentPage }} / {{ totalPages() }}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages()">Suivant</button>
    </div>
  </div>
</div>
