<!-- header.component.html -->
<header class="fixed top-0 left-0 w-full z-50 bg-[#4169E1] text-white px-6 py-2 flex justify-between items-center shadow-md">
  <!-- Logo -->
  <div class="flex items-center">
    <a routerLink="/restaurants" aria-label="Retour à la page des restaurants">
      <h1 class="text-2xl font-serif !no-underline text-white font-bold">Yakalma</h1>
    </a>
  </div>

  <!-- Bouton Burger (mobile) -->
  <button
    class="lg:hidden text-white !text-2xl focus:outline-none"
    (click)="mobileMenuOpen = !mobileMenuOpen"
    aria-label="Menu mobile"
  >
    <i class="fas fa-bars"></i>
  </button>

  <!-- Navigation (desktop) -->
  <nav class="hidden lg:flex space-x-6" role="navigation" aria-label="Menu principal">
    <a
      routerLink="/restaurant/dashboard"
      routerLinkActive="text-blue-400 font-bold border-b-2 !border-blue-400 pb-1"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
    >
      Accueil
    </a>

    <a
      routerLink="/restaurant/menu-management"
      routerLinkActive="text-blue-400 font-bold border-b-2 border-blue-400 pb-1"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
    >
      Commande
    </a>

    <a
      routerLink="/restaurant/menu"
      routerLinkActive="text-blue-400 font-bold border-b-2 border-blue-400 pb-1"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
    >
      Menu
    </a>

    <a
      routerLink="/pages"
      routerLinkActive="text-blue-400 font-bold border-b-2 border-blue-400 pb-1"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
    >
      Pages
    </a>
  </nav>


  <!-- Profil -->
  <div
    *ngIf="isRestaurant"
    class="relative"
    (click)="toggleDropdown()"
    tabindex="0"
    role="button"
    aria-haspopup="true"
    [attr.aria-expanded]="dropdownOpen"
  >
    <div class="flex items-center gap-2 cursor-pointer">
      <img src="assets/chefn.webp" alt="Avatar utilisateur" class="w-8 h-8 rounded-full object-cover" />
      <span class="hidden sm:inline">Mon Compte</span>
      <span class="text-xs">&#9662;</span>
    </div>

    <!-- Dropdown -->
    <div
      *ngIf="dropdownOpen"
      class="absolute right-0 mt-2 w-52 bg-white text-gray-800 rounded-lg shadow-lg z-50"
      role="menu"
    >
      <a
        role="menuitem"
        (click)="goToProfile()"
        class="block px-6 py-2 hover:bg-[#4169E1] !text-gray-800 hover:!text-white !no-underline transition"
      ><i class="fas fa-user-circle text-[#bbb] hover:!bg-white text-xl"></i> Profil</a>
      <a
        role="menuitem"
        (click)="changePassword()"
        class="block px-2 py-2 hover:bg-[#4169E1] text-left !text-gray-800 hover:!text-white !no-underline transition"
      ><i class="fas fa-key text-[#bbb] text-xl"></i> Changer mot de passe</a>
      <a
        role="menuitem"
        (click)="logout()"
        class="block px-4 py-2 hover:bg-red-500 !text-gray-800 hover:!text-white !no-underline transition"
      ><i class="fas fa-sign-out-alt text-red-300 text-xl"></i> Déconnexion</a>
    </div>
  </div>

  <!-- Menu Mobile -->
  <div *ngIf="mobileMenuOpen" class="absolute top-full left-0 w-full bg-[#4169E1] flex flex-col items-start px-6 py-4 space-y-3 lg:hidden z-40">
    <a
      routerLink="/restaurant/dashboard"
      routerLinkActive="text-blue-400 font-bold border-l-4 border-blue-400 pl-2"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
      (click)="mobileMenuOpen=false"
    >
      Accueil
    </a>

    <a
      routerLink="/restaurant/menu-management"
      routerLinkActive="text-blue-400 font-bold border-l-4 border-blue-400 pl-2"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
      (click)="mobileMenuOpen=false"
    >
      Commande
    </a>

    <a
      routerLink="/restaurant/menu"
      routerLinkActive="text-blue-400 font-bold border-l-4 border-blue-400 pl-2"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
      (click)="mobileMenuOpen=false"
    >
      Menu
    </a>

    <a
      routerLink="/pages"
      routerLinkActive="text-blue-400 font-bold border-l-4 border-blue-400 pl-2"
      [routerLinkActiveOptions]="{ exact: true }"
      *ngIf="isRestaurant"
      class="hover:!text-blue-300 !text-white !no-underline transition"
      (click)="mobileMenuOpen=false"
    >
      Pages
    </a>
  </div>
</header>
